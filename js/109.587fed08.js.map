{"version":3,"file":"js/109.587fed08.js","mappings":"yQACOA,MAAM,Q,GACLA,MAAM,+B,GAGDA,MAAM,Y,GACJA,MAAM,mB,GAKNA,MAAM,kB,EAXrB,uB,GAwBaA,MAAM,O,GACJA,MAAM,kC,GACJA,MAAM,e,GAQFA,MAAM,Q,GAIZA,MAAM,kB,GAQZA,MAAM,e,GACJA,MAAM,6B,GAEJA,MAAM,gB,0CAhDjBC,EAAAA,EAAAA,IAqDM,MArDNC,EAqDM,EApDJC,EAAAA,EAAAA,IA0CK,KA1CLC,EA0CK,gBAzCHH,EAAAA,EAAAA,IAwCKI,EAAAA,GAAA,MA3CXC,EAAAA,EAAAA,IAGyBC,EAAAC,UAARC,K,WAAXR,EAAAA,EAAAA,IAwCK,MAxCyBS,IAAKD,EAAKE,SAAUX,MAAM,mB,EAEtDG,EAAAA,EAAAA,IAiBM,MAjBNS,EAiBM,EAhBJT,EAAAA,EAAAA,IAIM,MAJNU,EAIM,EAVhBC,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAOeN,EAAKO,WAAWC,SAAU,IAC7B,gBAAAd,EAAAA,EAAAA,IAAI,qBARhBW,EAAAA,EAAAA,IAQgB,KACJC,EAAAA,EAAAA,IAAA,IAAON,EAAKS,SAAK,MAEnBf,EAAAA,EAAAA,IAUM,MAVNgB,EAUM,EATJhB,EAAAA,EAAAA,IAQS,UARDiB,KAAK,SACXpB,MAAM,2BACN,iBAAe,QACf,iBAAe,aACdqB,SAAUd,EAAAe,eACVC,QAAKC,GAAEjB,EAAAkB,aAAahB,IACtB,OAED,EApBZiB,QAwBQvB,EAAAA,EAAAA,IAiBM,MAjBNwB,EAiBM,EAhBJxB,EAAAA,EAAAA,IAYM,MAZNyB,EAYM,EAXJzB,EAAAA,EAAAA,IAIM,MAJN0B,EAIM,EAHJ1B,EAAAA,EAAAA,IAAiD,aAAAY,EAAAA,EAAAA,IAAxCN,EAAKqB,cAAcC,aAAW,IACvC5B,EAAAA,EAAAA,IAAwC,aAAAY,EAAAA,EAAAA,IAA/BN,EAAKuB,YAAYC,MAAI,aAC9B9B,EAAAA,EAAAA,IAAuE,aAAAY,EAAAA,EAAAA,IAA/BN,EAAKyB,YAAYD,MAAI,YAA/CxB,EAAKyB,YAAYD,WAEjC9B,EAAAA,EAAAA,IAKM,aAJJA,EAAAA,EAAAA,IAGU,6BAFRA,EAAAA,EAAAA,IAAqB,eAAZ,MAAE,KACXA,EAAAA,EAAAA,IAA+C,MAA/CgC,GAA+CpB,EAAAA,EAAAA,IAA1BN,EAAK2B,OAAS,KAAJ,UAIrCjC,EAAAA,EAAAA,IAEM,MAFNkC,EAEM,EADJlC,EAAAA,EAAAA,IAAgC,UAAAY,EAAAA,EAAAA,IAAA,IAAtBN,EAAK6B,YAAQ,Y,SAO/BnC,EAAAA,EAAAA,IAOM,MAPNoC,EAOM,EANJpC,EAAAA,EAAAA,IAKM,MALNqC,EAKM,cAJJrC,EAAAA,EAAAA,IAAyB,OAApBH,MAAM,OAAM,MAAE,KACnBG,EAAAA,EAAAA,IAEM,MAFNsC,EAEM,EADJC,EAAAA,EAAAA,IAAgBC,EAAAC,OAAA,cAAhB,IAAgB,cAlD1B9B,EAAAA,EAAAA,IAkDgB,WAAG,U,CAQnB,OACE+B,OAAQ,CAAC,WAAY,kBACrBC,QAAS,CACPrB,YAAAA,CAAchB,GACZ,MAAMsC,EAAWtC,EAAKO,WAChBL,EAAWF,EAAKE,SAChBqC,EAAU,CACdC,aAAcxC,EAAKqB,cAAcoB,UACjCC,MAAO1C,EAAKuB,YAAYoB,MACxBC,MAAO5C,EAAKyB,YAAYkB,MACxBhB,MAAO3B,EAAK2B,MACZlB,MAAOT,EAAKS,OAEdoC,KAAKC,MAAM,cAAe,CAAER,WAAUC,UAASrC,YACjD,I,UCjEJ,MAAM6C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,Q,kiBCoJMC,EAAa,G,0EAZnB,MAAMC,GAAUd,EAAAA,EAAAA,IAAO,WAEjBe,EAAQC,EAGRC,EAAa,CACjB,CAAEV,MAAO,KAAMnB,KAAM,MACrB,CAAEmB,MAAO,OAAQnB,KAAM,MACvB,CAAEmB,MAAO,aAAcnB,KAAM,MAC7B,CAAEmB,MAAO,SAAUnB,KAAM,MACzB,CAAEmB,MAAO,MAAOnB,KAAM,OAKlB8B,GAAQC,EAAAA,EAAAA,IAAI,MACZC,GAAgBD,EAAAA,EAAAA,IAAI,OAC1BE,EAAAA,EAAAA,KAAU,KACRD,EAAcb,MAAQ,IAAIe,EAAAA,GAAMJ,EAAMX,MAAO,CAC3CgB,SAAU,SACVC,UAAU,GACV,KAEJC,EAAAA,EAAAA,KAAgB,KACdL,EAAcb,MAAMmB,MAAM,IAE5BC,EAAa,CAAEP,gBAAeQ,kBAI9B,MAAMC,GAAcV,EAAAA,EAAAA,IAAI,CACtBf,aAAc,KACdE,MAAO,KACPE,OAAO,EACPjB,MAAO,GACPlB,MAAO,IAIT,SAASuD,IACPC,EAAYtB,MAAQ,CAClBH,aAAc,KACdE,MAAO,KACPE,OAAO,EACPjB,MAAO,GACPlB,MAAO,GAETyD,EAAevB,OAAQ,CACzB,CAGA,MAAMwB,GAAWZ,EAAAA,EAAAA,IAAI,CAAC,GACtB,SAASa,IACPD,EAASxB,MAAQQ,EAAMkB,gBAAgB/B,QACzC,CACA,SAASgC,IACPL,EAAYtB,MAAQQ,EAAMkB,gBAAgB9B,OAC5C,EACAgC,EAAAA,EAAAA,KAAe,KACbH,IACAE,GAAmB,IAIrB,MAAMzC,GAAW2C,EAAAA,EAAAA,KAAS,KACxB,MAAMC,EAAeN,EAASxB,MAAM+B,MAEpC,IAAIC,EAAe,EACnBA,EAAeC,EACZC,MAAKC,GAAOA,EAAIrC,YAAcwB,EAAYtB,MAAMH,eAChDmC,aAEH,MAAM1B,EAAagB,EAAYtB,MAAMC,MAAQ,GAAK,EAC5CnC,EAAQwD,EAAYtB,MAAMlC,MAEhC,OAAQgE,EAAeE,EAAe1B,GAAcxC,CAAK,IAIrDyD,GAAiBX,EAAAA,EAAAA,KAAI,GAG3B,SAASwB,IACP,IAAIC,EAASf,EAAYtB,MAAMlC,MAC/BuE,IACAf,EAAYtB,MAAMlC,MAAQuE,EAC1BC,GACF,CAEA,SAASC,IACP,IAAIF,EAASf,EAAYtB,MAAMlC,MAC/BuE,IACIA,EAAS,IACXA,EAAS,GAEXf,EAAYtB,MAAMlC,MAAQuE,EAC1BC,GACF,CAEA,SAASA,IACHhB,EAAYtB,MAAMlC,MAAQ,GAAKwD,EAAYtB,MAAMlC,MAAQ,IAAM,EACjEyD,EAAevB,OAAQ,EAEvBuB,EAAevB,OAAQ,CAE3B,CAGA,MAAM5C,GAAWqC,EAAAA,EAAAA,IAAO,YAGxB,SAAS+C,IAEP,GADAF,IACIf,EAAevB,MAAS,OAE5B,MAAMpC,EAAa,IAAK4D,EAASxB,OAEjC,IAAItB,EAAgB,CAAC,EACrBA,EAAgB,IAAKuD,EAASC,MAAKC,GAAOA,EAAIrC,YAAcwB,EAAYtB,MAAMH,gBAE9E,IAAIjB,EAAc,CAAC,EACnBA,EAAc,IAAK8B,EAAWwB,MAAKO,GAAUA,EAAOzC,QAAUsB,EAAYtB,MAAMD,SAEhF,MAAMjB,EAAc,CAClBkB,MAAOsB,EAAYtB,MAAMC,MACzB8B,MAAOT,EAAYtB,MAAMC,MAAQ,GAAK,EACtCpB,KAAMyC,EAAYtB,MAAMC,MAAQ,KAAO,IAGnC1C,EAAWiD,EAAMkB,gBAAgBnE,SAEjCmF,EAAM,CACV9E,aACAc,gBACAE,cACAE,cACAE,MAAOsC,EAAYtB,MAAMhB,MACzBlB,MAAOwD,EAAYtB,MAAMlC,MACzBoB,SAAUA,EAASc,MACnBzC,YAIFH,EAAS4C,MAAM2C,SAAQ,CAACtF,EAAMuF,KACxBvF,EAAKE,WAAamF,EAAInF,UACxBH,EAAS4C,MAAM6C,OAAOD,EAAO,EAAGF,EAClC,IAIF7B,EAAcb,MAAMmB,OACpBE,GACF,CAGA,SAASyB,IACPvC,EAAQwC,KAAK,aAAcvB,EAASxB,OACpCuB,EAAevB,OAAQ,CACzB,CAEA,SAASgD,IACP,MAAMzF,EAAWiD,EAAMkB,gBAAgBnE,SACvCH,EAAS4C,MAAM2C,SAAQ,CAACtF,EAAMuF,KACxBvF,EAAKE,WAAaA,GACpBH,EAAS4C,MAAM6C,OAAOD,EAAO,EAC/B,GAGJ,C,OAEArC,EAAQ0C,GAAG,iBAAkBX,GAC7B/B,EAAQ0C,GAAG,kBAAmBD,IAE9BE,EAAAA,EAAAA,KAAY,KACV3C,EAAQ4C,IAAI,kBACZ5C,EAAQ4C,IAAI,kBAAkB,I,kmHC7ThC,MAAM,GAAc,GAEpB,U,uQCuBA,MAAM5C,GAAUd,EAAAA,EAAAA,IAAO,WAGjB+B,GAAWZ,EAAAA,EAAAA,IAAI,CAAC,GACtBL,EAAQ0C,GAAG,cAAc5F,IACvBmE,EAASxB,MAAQ3C,CAAI,KAEvB6D,EAAAA,EAAAA,KAAgB,KACdX,EAAQ4C,IAAI,aAAa,IAI3B,MAAMxC,GAAQC,EAAAA,EAAAA,IAAI,MACZC,GAAgBD,EAAAA,EAAAA,IAAI,MAU1B,SAASwC,IACP7C,EAAQwC,KAAK,iBACf,CAEA,SAASM,IACP9C,EAAQwC,KAAK,kBACf,C,OAfAjC,EAAAA,EAAAA,KAAU,KACRD,EAAcb,MAAQ,IAAIe,EAAAA,GAAMJ,EAAMX,MAAM,KAE9CkB,EAAAA,EAAAA,KAAgB,KACdL,EAAcb,MAAMmB,MAAM,IAE5BC,EAAa,CAAEP,kB,okBC7Cf,MAAM,GAAc,GAEpB,U,+YCiGA,MAAMyC,GAASC,EAAAA,EAAAA,MAETrF,GAAiBuB,EAAAA,EAAAA,IAAO,kBAExBrC,GAAWqC,EAAAA,EAAAA,IAAO,YAClB+D,GAAe/D,EAAAA,EAAAA,IAAO,gBAGtBgE,GAAsB7C,EAAAA,EAAAA,KAAI,GAC1B8C,GAAsB9C,EAAAA,EAAAA,KAAI,IAEhC+C,EAAAA,EAAAA,KACE,MAAQH,EAAaxD,MAAM4D,SAC1BC,IACCJ,EAAoBzD,MAAQ6D,EAC5BH,EAAoB1D,MAAQ6D,CAAQ,GAEtC,CAAEC,WAAW,IAIf,MAAMC,GAActE,EAAAA,EAAAA,IAAO,eACrBuE,GAAcvE,EAAAA,EAAAA,IAAO,eAE3B,SAASwE,IACP,IAAI5B,EAAS0B,EAAY/D,MACzBqC,IACA0B,EAAY/D,MAAQqC,EACpB6B,GACF,CAEA,SAASC,IACP,IAAI9B,EAAS0B,EAAY/D,MACzBqC,IACIA,EAAS,IACXA,EAAS,GAEX0B,EAAY/D,MAAQqC,EACpB6B,GACF,CAGA,MAAME,GAAexD,EAAAA,EAAAA,IAAI,GAQzB,SAASyD,IACP,IAAIC,EAAS,EACblH,EAAS4C,MAAM2C,SAAQtF,IACrBiH,GAAUjH,EAAK6B,QAAQ,IAEzBkF,EAAapE,MAAQsE,CAEvB,EAbAX,EAAAA,EAAAA,IACEvG,EACAiH,EACA,CAAEP,WAAW,EAAMS,MAAM,IAa3B,MAAMC,GAAuB5D,EAAAA,EAAAA,KAAI,GAC3B6D,GAAuB7D,EAAAA,EAAAA,KAAI,GAEjC,SAAS8D,IACFV,EAAYhE,MAGfwE,EAAqBxE,OAAQ,EAF7BwE,EAAqBxE,OAAQ,CAIjC,CAEA,SAASkE,IACHH,EAAY/D,MAAQ,GAAK+D,EAAY/D,MAAQ,IAAM,EACrDyE,EAAqBzE,OAAQ,EAE7ByE,EAAqBzE,OAAQ,CAEjC,CAGA,MAAM2E,GAAgB/D,EAAAA,EAAAA,IAAI,CAAC,GAE3B,SAASgE,EAAaC,GACpBF,EAAc3E,MAAQ6E,CACxB,CAGA,SAASC,IAGP,GAFAJ,IACAR,IACIM,EAAqBxE,OAASyE,EAAqBzE,MAAS,OAEhE,MAAM+E,EAAgB,CACpBC,KAAM5H,EAAS4C,MACfoE,aAAcA,EAAapE,MAC3BgE,YAAaA,EAAYhE,MACzB+D,YAAaA,EAAY/D,MACzBzC,SAAU0H,KAAKC,OAGXC,EAAeC,KAAKC,MAAMD,KAAKE,UAAUP,IAE/CvB,EAAaxD,MAAMuF,KAAKJ,GAIxB/H,EAAS4C,MAAM4D,OAAS,EACxBN,EAAOiC,KAAK,iBACd,CAGA,MAAMC,GAAY5E,EAAAA,EAAAA,IAAI,MAChB6E,GAAc7E,EAAAA,EAAAA,IAAI,M,OACxB8E,EAAAA,EAAAA,KAAmB,KACjB,GAAIC,SAASC,eAAe,aAAaC,UAAUC,SAAS,SAAWH,SAASC,eAAe,eAAeC,UAAUC,SAAS,QAI/H,OAHAN,EAAUxF,MAAMa,cAAcM,OAC9BsE,EAAYzF,MAAMa,cAAcM,OAChCqE,EAAUxF,MAAMqB,iBACT,CACT,I,2wFCvNF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE,S","sources":["webpack://restaurant_ordering_website/./src/components/cart-page/CartItemList.vue","webpack://restaurant_ordering_website/./src/components/cart-page/CartItemList.vue?b8e8","webpack://restaurant_ordering_website/./src/components/cart-page/EditWindow.vue","webpack://restaurant_ordering_website/./src/components/cart-page/EditWindow.vue?27a3","webpack://restaurant_ordering_website/./src/components/cart-page/DeleteModal.vue","webpack://restaurant_ordering_website/./src/components/cart-page/DeleteModal.vue?0000","webpack://restaurant_ordering_website/./src/views/CartPage.vue","webpack://restaurant_ordering_website/./src/views/CartPage.vue?115c"],"sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <ul class=\"list-group list-group-flush\">\r\n      <li v-for=\"item in cartData\" :key=\"item.dateTime\" class=\"list-group-item\">\r\n\r\n        <div class=\"row mb-2\">\r\n          <div class=\"col-8 fw-bolder\">\r\n            {{ item.mealObject.strMeal }}\r\n            <br>\r\n            {{ `×${item.count}` }}\r\n          </div>\r\n          <div class=\"col-4 text-end\">\r\n            <button type=\"button\"\r\n              class=\"btn btn-outline-rosewood\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#editModal\"\r\n              :disabled=\"diningFinished\"\r\n              @click=\"emitCartItem(item)\"\r\n            >\r\n              編輯\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-9 ps-4 text-body-secondary\">\r\n            <div class=\"custom-info\">\r\n              <span>{{ item.setMenuObject.setMenuName }}</span>\r\n              <span>{{ item.spicyObject.name }}</span>\r\n              <span v-show=\"item.extraObject.name\">{{ item.extraObject.name }}</span>\r\n            </div>\r\n            <div>\r\n              <details>\r\n                <summary>備註</summary>\r\n                <div class=\"ps-3\">{{ item.notes || '無' }}</div>\r\n              </details>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3 text-end\">\r\n            <b>{{ `$${item.subtotal}` }}</b>\r\n          </div>\r\n        </div>\r\n\r\n      </li>\r\n    </ul>\r\n\r\n    <div class=\"card-footer\">\r\n      <div class=\"row text-body fw-semibold\">\r\n        <div class=\"col\">小計</div>\r\n        <div class=\"col text-end\">\r\n          <slot>未計算</slot>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  inject: ['cartData', 'diningFinished'],\r\n  methods: {\r\n    emitCartItem (item) {\r\n      const mealItem = item.mealObject\r\n      const dateTime = item.dateTime\r\n      const options = {\r\n        setMenuRadio: item.setMenuObject.setMenuId,\r\n        spicy: item.spicyObject.value,\r\n        extra: item.extraObject.value,\r\n        notes: item.notes,\r\n        count: item.count\r\n      }\r\n      this.$emit('editProduct', { mealItem, options, dateTime })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.custom-info > :not(:first-child)::before {\r\n  content: ' ‧ ';\r\n}\r\n</style>\r\n","import { render } from \"./CartItemList.vue?vue&type=template&id=8263425c&scoped=true\"\nimport script from \"./CartItemList.vue?vue&type=script&lang=js\"\nexport * from \"./CartItemList.vue?vue&type=script&lang=js\"\n\nimport \"./CartItemList.vue?vue&type=style&index=0&id=8263425c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8263425c\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"editModal\" ref=\"modal\" class=\"modal fade\" tabindex=\"-1\">\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n\r\n        <div class=\"modal-header\">\r\n          <h1 class=\"modal-title fs-5\">編輯餐點</h1>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" @click=\"clearSettings\"></button>\r\n        </div>\r\n\r\n        <form>\r\n          <div class=\"modal-body\">\r\n            <!-- 該餐點資訊 -->\r\n            <div class=\"row\">\r\n              <h2 class=\"col-8\">{{ mealInfo.strMeal }}</h2>\r\n              <div class=\"col-4 text-end\">{{ `NT$ ${mealInfo.price}` }}</div>\r\n            </div>\r\n\r\n            <!-- 套餐 -->\r\n            <fieldset>\r\n              <legend class=\"col-form-label\">套餐</legend>\r\n              <div v-for=\"set in setMenus\" :key=\"set.setMenuId\" class=\"form-check\">\r\n                <input :id=\"`${set.setMenuId}_E`\"\r\n                  v-model=\"userEditing.setMenuRadio\"\r\n                  class=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  :value=\"set.setMenuId\"\r\n                >\r\n\r\n                <label class=\"form-check-label d-block\" :for=\"`${set.setMenuId}_E`\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-8\">{{ set.setMenuName }}</div>\r\n                    <div class=\"col-4 text-end\">{{ `+ ${set.setMenuPrice} 元` }}</div>\r\n                  </div>\r\n\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">{{ set.setMenuDescription }}</div>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n            </fieldset>\r\n\r\n            <!-- 辣度 -->\r\n            <fieldset>\r\n              <legend class=\"col-form-label\">辣度</legend>\r\n              <div v-for=\"item in spicyArray\" :key=\"item.value\" class=\"form-check form-check-inline\">\r\n                <input :id=\"`${item.value}_E`\"\r\n                  v-model=\"userEditing.spicy\"\r\n                  class=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  :value=\"item.value\"\r\n                >\r\n                <label class=\"form-check-label\" :for=\"`${item.value}_E`\">\r\n                  {{ item.name }}\r\n                </label>\r\n              </div>\r\n            </fieldset>\r\n\r\n            <!-- 加量 -->\r\n            <fieldset>\r\n              <legend class=\"col-form-label\">加量</legend>\r\n              <div class=\"form-check\">\r\n                <input id=\"extraCheckbox_E\"\r\n                  v-model=\"userEditing.extra\"\r\n                  class=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                >\r\n                <label class=\"form-check-label d-block\" for=\"extraCheckbox_E\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-8\">是</div>\r\n                    <div class=\"col-4 text-end\">{{ `+ ${extraPrice} 元` }}</div>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n            </fieldset>\r\n\r\n            <!-- 備註 -->\r\n            <fieldset>\r\n              <label for=\"notesText_E\" class=\"col-form-label\">備註</label>\r\n              <textarea id=\"notesText_E\"\r\n                v-model.lazy=\"userEditing.notes\"\r\n                class=\"form-control\"\r\n                rows=\"3\"\r\n              ></textarea>\r\n            </fieldset>\r\n\r\n            <!-- 數量 -->\r\n            <fieldset>\r\n              <label class=\"col-form-label\" for=\"count_E\">數量</label>\r\n              <!-- 一樣用網格系統來擺放「減按鈕」、「數字框」、「加按鈕」 -->\r\n              <div class=\"row gx-0\">\r\n                <div class=\"col-2 text-center\">\r\n                  <button type=\"button\" class=\"btn border-0\" :disabled=\"userEditing.count <= 1\" @click=\"minusCount\">\r\n                    <i class=\"bi bi-dash-lg\"></i>\r\n                  </button>\r\n                </div>\r\n\r\n                <div class=\"col-4\">\r\n                  <input id=\"count_E\"\r\n                    v-model.number=\"userEditing.count\"\r\n                    class=\"form-control\"\r\n                    :class=\"{'is-invalid': isInvalidCount}\"\r\n                    type=\"number\" min=\"1\"\r\n                    @=\"{input: checkCount, focusout: checkCount}\"\r\n                  >\r\n                  <div class=\"invalid-feedback\">請輸入正整數</div>\r\n                </div>\r\n\r\n                <div class=\"col-2 text-center\">\r\n                  <button type=\"button\" class=\"btn\" @click=\"plusCount\">\r\n                    <i class=\"bi bi-plus-lg\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </fieldset>\r\n\r\n            <!-- 小計 -->\r\n            <p class=\"text-end h5 mt-3\">\r\n              {{ `小計：NT$ ${subtotal} 元` }}\r\n            </p>\r\n          </div>\r\n\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-outline-danger me-auto px-3\" data-bs-target=\"#deleteModel\" data-bs-toggle=\"modal\" @click=\"askToDelete\">\r\n              刪除\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-outline-rosewood\" data-bs-dismiss=\"modal\" @click=\"clearSettings\">\r\n              取消\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-rosewood\" @click=\"finishEditing\">\r\n              確認編輯\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, inject, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, ref } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\nimport setMenus from '@/assets/set-menu.json'\r\n\r\nconst emitter = inject('emitter')\r\n\r\nconst props = defineProps(['cartItemPropped'])\r\n\r\n// 餐點選項（顯示用）\r\nconst spicyArray = [\r\n  { value: 'no', name: '不辣' },\r\n  { value: 'mild', name: '微辣' },\r\n  { value: 'mildMedium', name: '小辣' },\r\n  { value: 'medium', name: '中辣' },\r\n  { value: 'hot', name: '大辣' }\r\n]\r\nconst extraPrice = 25\r\n\r\n// Modal視窗\r\nconst modal = ref(null)\r\nconst modalInstance = ref(null)\r\nonMounted(() => {\r\n  modalInstance.value = new Modal(modal.value, {\r\n    backdrop: 'static',\r\n    keyboard: false\r\n  })\r\n})\r\nonBeforeUnmount(() => {\r\n  modalInstance.value.hide()\r\n})\r\ndefineExpose({ modalInstance, clearSettings })\r\n\r\n// V-Model餐點選項設定\r\n// 如果因為錯誤導致資料沒有傳進來，至少先給個初始值\r\nconst userEditing = ref({\r\n  setMenuRadio: 'No',\r\n  spicy: 'no',\r\n  extra: false,\r\n  notes: '',\r\n  count: 0\r\n})\r\n\r\n// 將商品視窗的表單復原到預設值\r\nfunction clearSettings () {\r\n  userEditing.value = {\r\n    setMenuRadio: 'No',\r\n    spicy: 'no',\r\n    extra: false,\r\n    notes: '',\r\n    count: 0\r\n  }\r\n  isInvalidCount.value = false\r\n}\r\n\r\n// 餐點資訊先給個空物件，再利用生命週期修改它\r\nconst mealInfo = ref({})\r\nfunction setMealInfo () {\r\n  mealInfo.value = props.cartItemPropped.mealItem\r\n}\r\nfunction setEditingOptions () {\r\n  userEditing.value = props.cartItemPropped.options\r\n}\r\nonBeforeUpdate(() => {\r\n  setMealInfo()\r\n  setEditingOptions()\r\n})\r\n\r\n// 商品表單的價格小計\r\nconst subtotal = computed(() => {\r\n  const productPrice = mealInfo.value.price\r\n\r\n  let setMenuPrice = 0\r\n  setMenuPrice = setMenus\r\n    .find(set => set.setMenuId === userEditing.value.setMenuRadio)\r\n    .setMenuPrice\r\n\r\n  const extraPrice = userEditing.value.extra ? 25 : 0\r\n  const count = userEditing.value.count\r\n\r\n  return (productPrice + setMenuPrice + extraPrice) * count\r\n})\r\n\r\n// 數量是否無效\r\nconst isInvalidCount = ref(false)\r\n\r\n// 增加數字框的數字\r\nfunction plusCount () {\r\n  let number = userEditing.value.count\r\n  number++\r\n  userEditing.value.count = number\r\n  checkCount()\r\n}\r\n// 減少數字框的數字，並檢查和校正數值\r\nfunction minusCount () {\r\n  let number = userEditing.value.count\r\n  number--\r\n  if (number < 1) {\r\n    number = 1\r\n  }\r\n  userEditing.value.count = number\r\n  checkCount()\r\n}\r\n// 觸發時檢查數值，並修改資料狀態\r\nfunction checkCount () {\r\n  if (userEditing.value.count < 1 || userEditing.value.count % 1 !== 0) {\r\n    isInvalidCount.value = true\r\n  } else {\r\n    isInvalidCount.value = false\r\n  }\r\n}\r\n\r\n// 購物車資料\r\nconst cartData = inject('cartData')\r\n\r\n// 完成修改時的動作\r\nfunction finishEditing () {\r\n  checkCount()\r\n  if (isInvalidCount.value) { return }\r\n\r\n  const mealObject = { ...mealInfo.value }\r\n\r\n  let setMenuObject = {}\r\n  setMenuObject = { ...setMenus.find(set => set.setMenuId === userEditing.value.setMenuRadio) }\r\n\r\n  let spicyObject = {}\r\n  spicyObject = { ...spicyArray.find(option => option.value === userEditing.value.spicy) }\r\n\r\n  const extraObject = {\r\n    value: userEditing.value.extra,\r\n    price: userEditing.value.extra ? 25 : 0,\r\n    name: userEditing.value.extra ? '加量' : ''\r\n  }\r\n\r\n  const dateTime = props.cartItemPropped.dateTime\r\n\r\n  const all = {\r\n    mealObject,\r\n    setMenuObject,\r\n    spicyObject,\r\n    extraObject,\r\n    notes: userEditing.value.notes,\r\n    count: userEditing.value.count,\r\n    subtotal: subtotal.value,\r\n    dateTime\r\n  }\r\n\r\n  // 透過陣列splice去替換資料\r\n  cartData.value.forEach((item, index) => {\r\n    if (item.dateTime === all.dateTime) {\r\n      cartData.value.splice(index, 1, all)\r\n    }\r\n  })\r\n  // console.log('修改完成：', all, '\\n目前購物車', cartData)\r\n\r\n  modalInstance.value.hide()\r\n  clearSettings()\r\n}\r\n\r\n// 有關刪除的邏輯\r\nfunction askToDelete () {\r\n  emitter.emit('deleteItem', mealInfo.value)\r\n  isInvalidCount.value = false\r\n}\r\n\r\nfunction deleteCartItem () {\r\n  const dateTime = props.cartItemPropped.dateTime\r\n  cartData.value.forEach((item, index) => {\r\n    if (item.dateTime === dateTime) {\r\n      cartData.value.splice(index, 1)\r\n    }\r\n  })\r\n  // console.log('刪除一項餐點，目前購物車', cartData)\r\n}\r\n\r\nemitter.on('cancelDeleting', checkCount)\r\nemitter.on('confirmDeleting', deleteCartItem)\r\n\r\nonUnmounted(() => {\r\n  emitter.off('cancelDeleting')\r\n  emitter.off('confirmDeleting')\r\n})\r\n</script>\r\n","import script from \"./EditWindow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditWindow.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div id=\"deleteModel\" ref=\"modal\" class=\"modal fade\" tabindex=\"-1\">\r\n  <div class=\"modal-dialog modal-dialog-centered modal-sm-unresponsive\">\r\n    <div class=\"modal-content\">\r\n\r\n      <div class=\"modal-body text-center\" style=\"padding: 1.5rem 1.5rem 1rem;\">\r\n        <h1 class=\"fs-5\">確定要刪除此品項嗎？</h1>\r\n        <p class=\"mb-0 text-body-secondary\">{{ mealInfo.strMeal }}</p>\r\n      </div>\r\n\r\n      <div class=\"modal-footer justify-content-evenly border-top-0\">\r\n        <button class=\"btn btn-outline-secondary\" data-bs-target=\"#editModal\" data-bs-toggle=\"modal\" @click=\"backToEditing\">\r\n          返回編輯\r\n        </button>\r\n        <button class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"confirmDeleting\">\r\n          確定刪除\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { inject, onBeforeUnmount, onMounted, ref } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\n\r\nconst emitter = inject('emitter')\r\n\r\n// 接收餐點資訊，以呈現在畫面上\r\nconst mealInfo = ref({})\r\nemitter.on('deleteItem', item => {\r\n  mealInfo.value = item\r\n})\r\nonBeforeUnmount(() => {\r\n  emitter.off('deleteItem')\r\n})\r\n\r\n// Modal視窗\r\nconst modal = ref(null)\r\nconst modalInstance = ref(null)\r\nonMounted(() => {\r\n  modalInstance.value = new Modal(modal.value)\r\n})\r\nonBeforeUnmount(() => {\r\n  modalInstance.value.hide()\r\n})\r\ndefineExpose({ modalInstance })\r\n\r\n// 返回編輯或確定刪除，交給另一個元件處理\r\nfunction backToEditing () {\r\n  emitter.emit('cancelDeleting')\r\n}\r\n\r\nfunction confirmDeleting () {\r\n  emitter.emit('confirmDeleting')\r\n}\r\n</script>\r\n","import script from \"./DeleteModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeleteModal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"container px-4 py-3\">\r\n    <p v-if=\"cartData.length\" class=\"mb-2\">\r\n      <RouterLink to=\"/\" class=\"text-decoration-none text-roast-brown fw-semibold\">回菜單←</RouterLink>\r\n    </p>\r\n\r\n    <form>\r\n      <!-- 桌號 -->\r\n      <div class=\"row mb-3 gx-0\">\r\n        <div class=\"col\">\r\n          <label for=\"tableNumberSelect\" class=\"col-form-label\">內用桌號</label>\r\n        </div>\r\n\r\n        <div class=\"col col-lg-5\">\r\n          <select id=\"tableNumberSelect\"\r\n            v-model=\"tableNumber\"\r\n            class=\"form-select\"\r\n            :class=\"{'is-invalid': isInvalidTableNumber}\"\r\n            @=\"{change: checkTableNumber}\"\r\n            :disabled=\"disabledTableNumber\"\r\n          >\r\n            <option value=\"\" disabled>請選擇桌號</option>\r\n            <option value=\"A1\">A1</option>\r\n            <option value=\"A2\">A2</option>\r\n            <option value=\"A3\">A3</option>\r\n            <option value=\"B1\">B1</option>\r\n            <option value=\"B2\">B2</option>\r\n          </select>\r\n          <div class=\"invalid-feedback\">請選擇您的桌號。</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 用餐人數 -->\r\n      <div class=\"row gx-0\">\r\n        <div class=\"col\">\r\n          <label for=\"guestsCountInput\" class=\"col-form-label\">用餐人數</label>\r\n        </div>\r\n\r\n        <div class=\"col-2 text-center col-lg-1\">\r\n          <button type=\"button\" title=\"減少\" class=\"btn border-0\" :disabled=\"guestsCount <= 1 || disabledGuestsCount\" @click=\"minusGuestsCount\">\r\n            <i class=\"bi bi-dash-lg\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"col-3\">\r\n          <input id=\"guestsCountInput\"\r\n            v-model.number=\"guestsCount\"\r\n            type=\"number\"\r\n            min=\"1\"\r\n            class=\"form-control\"\r\n            :class=\"{'is-invalid': isInvalidGuestsCount}\"\r\n            @=\"{input: checkGuestsCount, focusout: checkGuestsCount}\"\r\n            :disabled=\"disabledGuestsCount\"\r\n          >\r\n          <div class=\"invalid-feedback\">請輸入有效人數</div>\r\n        </div>\r\n\r\n        <div class=\"col-2 text-center col-lg-1\">\r\n          <button type=\"button\" title=\"增加\" class=\"btn border-0\" :disabled=\"disabledGuestsCount\" @click=\"plusGuestsCount\">\r\n            <i class=\"bi bi-plus-lg\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <!-- 分隔線 -->\r\n    <hr>\r\n\r\n    <!-- 購物車為空的時候，的提示訊息 -->\r\n    <div v-if=\"!cartData.length\">\r\n      <h1 class=\"text-center text-body-tertiary mt-4\">尚未加入餐點</h1>\r\n      <p class=\"text-center\">\r\n        <RouterLink to=\"/\" title=\"首頁\" class=\"text-body-tertiary\">點餐去</RouterLink>\r\n      </p>\r\n    </div>\r\n\r\n    <EditWindow ref=\"editModal\" :cartItemPropped=\"cartItemProps\"></EditWindow>\r\n    <DeleteModal ref=\"deleteModal\"></DeleteModal>\r\n\r\n    <!-- 購物車，以表格呈現。當中的插槽用來填入購物車金額小計。 -->\r\n    <template v-if=\"cartData.length\">\r\n      <CartItemList @editProduct=\"editProduct\">\r\n        {{ `NT$${cartSubtotal}` }}\r\n      </CartItemList>\r\n    </template>\r\n\r\n    <button type=\"button\" class=\"btn btn-warning fixed-bottom btn-lg btn-wine-red\" :disabled=\"diningFinished || !cartData.length\" @click=\"submitCartData\">\r\n      送出訂單\r\n    </button>\r\n\r\n    <ToTopBtn></ToTopBtn>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { inject, ref, watch } from 'vue'\r\nimport { onBeforeRouteLeave, useRouter } from 'vue-router'\r\nimport CartItemList from '@/components/cart-page/CartItemList.vue'\r\nimport EditWindow from '@/components/cart-page/EditWindow.vue'\r\nimport DeleteModal from '@/components/cart-page/DeleteModal.vue'\r\nimport ToTopBtn from '@/components/application/ToTopBtn.vue'\r\n\r\nconst router = useRouter()\r\n\r\nconst diningFinished = inject('diningFinished')\r\n\r\nconst cartData = inject('cartData')\r\nconst orderHistory = inject('orderHistory')\r\n\r\n// 呼叫時檢查訂單紀錄是否有資料，如果有就鎖定桌號與用餐人數欄位\r\nconst disabledTableNumber = ref(false)\r\nconst disabledGuestsCount = ref(false)\r\n\r\nwatch(\r\n  () => !!orderHistory.value.length,\r\n  (hasOrder) => {\r\n    disabledTableNumber.value = hasOrder\r\n    disabledGuestsCount.value = hasOrder\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n// 設定用餐人數\r\nconst guestsCount = inject('guestsCount')\r\nconst tableNumber = inject('tableNumber')\r\n\r\nfunction plusGuestsCount () {\r\n  let number = guestsCount.value\r\n  number++\r\n  guestsCount.value = number\r\n  checkGuestsCount()\r\n}\r\n\r\nfunction minusGuestsCount () {\r\n  let number = guestsCount.value\r\n  number--\r\n  if (number < 1) {\r\n    number = 1\r\n  }\r\n  guestsCount.value = number\r\n  checkGuestsCount()\r\n}\r\n\r\n// 購物車內的金額總和\r\nconst cartSubtotal = ref(0)\r\n\r\nwatch(\r\n  cartData,\r\n  calcCartSubtotal,\r\n  { immediate: true, deep: true }\r\n)\r\n\r\nfunction calcCartSubtotal () {\r\n  let result = 0\r\n  cartData.value.forEach(item => {\r\n    result += item.subtotal\r\n  })\r\n  cartSubtotal.value = result\r\n  // console.log('計算總和：', cartSubtotal.value)\r\n}\r\n\r\n// 檢驗桌號與用餐人數\r\nconst isInvalidTableNumber = ref(false)\r\nconst isInvalidGuestsCount = ref(false)\r\n\r\nfunction checkTableNumber () {\r\n  if (!tableNumber.value) {\r\n    isInvalidTableNumber.value = true\r\n  } else {\r\n    isInvalidTableNumber.value = false\r\n  }\r\n}\r\n\r\nfunction checkGuestsCount () {\r\n  if (guestsCount.value < 1 || guestsCount.value % 1 !== 0) {\r\n    isInvalidGuestsCount.value = true\r\n  } else {\r\n    isInvalidGuestsCount.value = false\r\n  }\r\n}\r\n\r\n// 將子元件傳遞上來的商品資料丟進編輯視窗\r\nconst cartItemProps = ref({})\r\n\r\nfunction editProduct (cartItem) {\r\n  cartItemProps.value = cartItem\r\n}\r\n\r\n// 提交訂單\r\nfunction submitCartData () {\r\n  checkTableNumber()\r\n  checkGuestsCount()\r\n  if (isInvalidTableNumber.value || isInvalidGuestsCount.value) { return }\r\n\r\n  const confirmedData = {\r\n    cart: cartData.value,\r\n    cartSubtotal: cartSubtotal.value,\r\n    tableNumber: tableNumber.value,\r\n    guestsCount: guestsCount.value,\r\n    dateTime: Date.now()\r\n  }\r\n\r\n  const deepCopyData = JSON.parse(JSON.stringify(confirmedData))\r\n\r\n  orderHistory.value.push(deepCopyData)\r\n  // console.log('送出訂單！', deepCopyData)\r\n\r\n  // 清空陣列\r\n  cartData.value.length = 0\r\n  router.push('/order-history')\r\n}\r\n\r\n// 確保Modal能夠被關閉\r\nconst editModal = ref(null)\r\nconst deleteModal = ref(null)\r\nonBeforeRouteLeave(() => {\r\n  if (document.getElementById('editModal').classList.contains('show') || document.getElementById('deleteModel').classList.contains('show')) {\r\n    editModal.value.modalInstance.hide()\r\n    deleteModal.value.modalInstance.hide()\r\n    editModal.value.clearSettings()\r\n    return false\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  @media screen and (min-width: 1200px) {\r\n    max-width: 960px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./CartPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CartPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CartPage.vue?vue&type=style&index=0&id=08254c54&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-08254c54\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$options","cartData","item","key","dateTime","_hoisted_3","_hoisted_4","_createTextVNode","_toDisplayString","mealObject","strMeal","count","_hoisted_5","type","disabled","diningFinished","onClick","$event","emitCartItem","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","setMenuObject","setMenuName","spicyObject","name","extraObject","_hoisted_10","notes","_hoisted_11","subtotal","_hoisted_12","_hoisted_13","_hoisted_14","_renderSlot","_ctx","$slots","inject","methods","mealItem","options","setMenuRadio","setMenuId","spicy","value","extra","this","$emit","__exports__","render","extraPrice","emitter","props","__props","spicyArray","modal","ref","modalInstance","onMounted","Modal","backdrop","keyboard","onBeforeUnmount","hide","__expose","clearSettings","userEditing","isInvalidCount","mealInfo","setMealInfo","cartItemPropped","setEditingOptions","onBeforeUpdate","computed","productPrice","price","setMenuPrice","setMenus","find","set","plusCount","number","checkCount","minusCount","finishEditing","option","all","forEach","index","splice","askToDelete","emit","deleteCartItem","on","onUnmounted","off","backToEditing","confirmDeleting","router","useRouter","orderHistory","disabledTableNumber","disabledGuestsCount","watch","length","hasOrder","immediate","guestsCount","tableNumber","plusGuestsCount","checkGuestsCount","minusGuestsCount","cartSubtotal","calcCartSubtotal","result","deep","isInvalidTableNumber","isInvalidGuestsCount","checkTableNumber","cartItemProps","editProduct","cartItem","submitCartData","confirmedData","cart","Date","now","deepCopyData","JSON","parse","stringify","push","editModal","deleteModal","onBeforeRouteLeave","document","getElementById","classList","contains"],"sourceRoot":""}