{"version":3,"file":"js/102.384fe4b6.js","mappings":"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","sources":["webpack://restaurant_ordering_website/./src/components/order-history-page/PaySelectModal.vue","webpack://restaurant_ordering_website/./src/components/order-history-page/PaySelectModal.vue?4b1d","webpack://restaurant_ordering_website/./src/components/order-history-page/PayLoadingModal.vue","webpack://restaurant_ordering_website/./src/components/order-history-page/PayLoadingModal.vue?8202","webpack://restaurant_ordering_website/./src/components/order-history-page/OrderAccordion.vue","webpack://restaurant_ordering_website/./src/components/order-history-page/OrderAccordion.vue?1462","webpack://restaurant_ordering_website/./src/views/OrderHistoryPage.vue","webpack://restaurant_ordering_website/./src/views/OrderHistoryPage.vue?e542"],"sourcesContent":["<template>\r\n  <div id=\"paySelectModal\" ref=\"modal\" class=\"modal fade\" tabindex=\"-1\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n      <div class=\"modal-content\">\r\n\r\n        <!-- Modal的內容主體 -->\r\n        <div class=\"modal-header border-bottom-0\">\r\n          <h1 class=\"modal-title fs-5 position-relative start-50 translate-middle-x\">請點選付款方式並確認</h1>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n        </div>\r\n\r\n        <div class=\"modal-body text-center\">\r\n          <!-- 以網格系統裝著不同選項的checkbox -->\r\n          <div class=\"row row-cols-2 gy-3 p-3\">\r\n            <div v-for=\"payment in paymentMethods\" :key=\"payment.value\" class=\"col\">\r\n              <input :id=\"payment.value\"\r\n                v-model=\"paymentSelected\"\r\n                type=\"radio\"\r\n                class=\"btn-check\"\r\n                :value=\"payment.value\"\r\n              >\r\n              <label class=\"btn btn-outline-success\" :for=\"payment.value\">\r\n                <p>{{ payment.name }}</p>\r\n                <img :src=\"payment.imgURL\"\r\n                  :alt=\"payment.name\"\r\n                  width=\"50\"\r\n                  height=\"50\"\r\n                  class=\"img-fluid w-75\"\r\n                >\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <button type=\"button\" class=\"btn btn-rosewood w-25\" :disabled=\"!paymentSelected\" @click=\"confirmOption\">\r\n            確定\r\n          </button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onBeforeUnmount, onMounted, ref } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\nimport counter from '@/assets/counter.png' // 來源：https://www.flaticon.com/free-icon/counter_3492385?term=counter&related_id=3492385\r\nimport credit from '@/assets/credit.png' // 來源：https://www.flaticon.com/free-icon/credit_1198299\r\nimport creditCard from '@/assets/credit-card.png' // 來源：https://www.flaticon.com/free-icon/credit-card_4117864?term=digital+payment&related_id=4117864\r\n\r\nconst emit = defineEmits(['processPayment'])\r\n\r\nconst paymentMethods = [\r\n  { name: '現場付款', value: 'payOnSite', imgURL: counter },\r\n  { name: '線上刷卡', value: 'payWithCreditCard', imgURL: credit },\r\n  { name: '行動支付', value: 'payDigital', imgURL: creditCard }\r\n]\r\n\r\n// V-Model選項\r\nconst paymentSelected = ref('')\r\n\r\n// Modal視窗\r\nconst modal = ref(null)\r\nconst modalInstance = ref(null)\r\nonMounted(() => {\r\n  modalInstance.value = new Modal(modal.value)\r\n  modal.value.addEventListener('hide.bs.modal', () => {\r\n    paymentSelected.value = ''\r\n  })\r\n})\r\nonBeforeUnmount(() => {\r\n  modalInstance.value.hide()\r\n})\r\ndefineExpose({ modalInstance })\r\n\r\n// 確定付款選項\r\nfunction confirmOption () {\r\n  emit('processPayment', paymentSelected.value)\r\n  modalInstance.value.hide()\r\n}\r\n</script>\r\n","import script from \"./PaySelectModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PaySelectModal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div id=\"payLoadingModal\" ref=\"modal\" class=\"modal fade\" tabindex=\"-1\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-sm-unresponsive\">\r\n      <div class=\"modal-content\">\r\n\r\n        <div class=\"modal-body text-center\">\r\n          <!-- 付款處理中 -->\r\n          <template v-if=\"paymentStatus === 'processing'\">\r\n            <h1 class=\"modal-title fs-5\">\r\n              付款處理中，請稍後\r\n            </h1>\r\n            <p class=\"mb-0 text-body-tertiary\">不要關閉視窗</p>\r\n            <div class=\"loader\"></div>\r\n          </template>\r\n\r\n          <!-- 付款成功 -->\r\n          <template v-else-if=\"paymentStatus === 'succeed'\">\r\n            <h1 class=\"modal-title fs-4 mb-2\">\r\n              付款成功！\r\n            </h1>\r\n            <p class=\"mb-0 text-body-tertiary\">此為隨機模擬結果，感謝您。</p>\r\n            <div class=\"text-center mt-4\">\r\n              <button type=\"button\" class=\"btn btn-outline-success w-50\" data-bs-dismiss=\"modal\">\r\n                關閉\r\n              </button>\r\n            </div>\r\n          </template>\r\n\r\n          <!-- 付款失敗 -->\r\n          <template v-else-if=\"paymentStatus === 'failed'\">\r\n            <h1 class=\"modal-title fs-4 mb-2 mt-2\">\r\n              付款失敗，請再試一次。\r\n            </h1>\r\n            <p class=\"mb-0 text-body-tertiary\">此為隨機模擬結果，不必擔心。</p>\r\n\r\n            <!-- 關閉按鈕 -->\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n\r\n            <div class=\"text-center mt-4\">\r\n              <button type=\"button\" class=\"btn btn-outline-danger w-50\" data-bs-toggle=\"modal\" data-bs-target=\"#paySelectModal\">\r\n                回付款選項\r\n              </button>\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { inject, onBeforeUnmount, onMounted, ref } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\n\r\nconst paymentStatus = inject('paymentStatus')\r\n\r\n// Modal視窗\r\nconst modal = ref(null)\r\nconst modalInstance = ref(null)\r\nonMounted(() => {\r\n  modalInstance.value = new Modal(modal.value, {\r\n    backdrop: 'static',\r\n    keyboard: false\r\n  })\r\n  modal.value.addEventListener('hide.bs.modal', resetStatus)\r\n  modal.value.addEventListener('hidePrevented.bs.modal', allowToClose)\r\n})\r\nonBeforeUnmount(() => {\r\n  modalInstance.value.hide()\r\n})\r\ndefineExpose({ modalInstance })\r\n\r\nfunction resetStatus () {\r\n  if (paymentStatus.value !== 'succeed' && paymentStatus.value !== 'payOnSite') {\r\n    paymentStatus.value = ''\r\n  }\r\n}\r\n\r\nfunction allowToClose () {\r\n  if (paymentStatus.value !== 'processing') {\r\n    modalInstance.value.hide()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.btn-close {\r\n  position: absolute;\r\n  right: 0.5em;\r\n  top: 0.5em;\r\n}\r\n\r\n/* 動畫來源：https://css-loaders.com/dots/ */\r\n.loader {\r\n  display: inline-block;\r\n  margin-top: 1rem;\r\n  width: 60px;\r\n  aspect-ratio: 2;\r\n  --_g: no-repeat radial-gradient(circle closest-side, #4a4a4a 90%, #0000);\r\n  background:\r\n    var(--_g) 0% 50%,\r\n    var(--_g) 50% 50%,\r\n    var(--_g) 100% 50%;\r\n  background-size: calc(100%/3) 50%;\r\n  animation: loader 1.3s infinite linear;\r\n}\r\n\r\n@keyframes loader {\r\n  15% {\r\n    background-position: 0% 0%, 50% 50%, 100% 50%\r\n  }\r\n\r\n  30% {\r\n    background-position: 0% 100%, 50% 0%, 100% 50%\r\n  }\r\n\r\n  45% {\r\n    background-position: 0% 50%, 50% 100%, 100% 0%\r\n  }\r\n\r\n  60% {\r\n    background-position: 0% 50%, 50% 50%, 100% 100%\r\n  }\r\n}\r\n</style>\r\n","import script from \"./PayLoadingModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PayLoadingModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PayLoadingModal.vue?vue&type=style&index=0&id=363f4d3c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-363f4d3c\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"orderHistoryAccordion\" class=\"accordion\">\r\n    <div v-for=\"(order, index) in orderHistory\" :key=\"order.dateTime\" class=\"accordion-item\">\r\n\r\n      <!-- 摺疊面板標題 -->\r\n      <h2 class=\"accordion-header\">\r\n        <button class=\"accordion-button\"\r\n          type=\"button\"\r\n          data-bs-toggle=\"collapse\"\r\n          :data-bs-target=\"`#orderHistoryContent${order.dateTime}`\"\r\n        >\r\n          <span>{{ `第 ${index + 1} 次點餐` }}</span>\r\n          <span class=\"ms-auto\">{{ new Date(order.dateTime).toLocaleTimeString() }}</span>\r\n        </button>\r\n      </h2>\r\n\r\n      <!-- 摺疊面板內容 -->\r\n      <div :id=\"`orderHistoryContent${order.dateTime}`\" class=\"accordion-collapse collapse show\">\r\n        <div class=\"accordion-body\">\r\n\r\n          <!-- 每一項餐點也是一個小折疊面板 -->\r\n          <details v-for=\"item in order.cart\" :key=\"item.dateTime\">\r\n            <!-- 小摺疊面板的標題顯示內容 -->\r\n            <summary class=\"mb-2\">\r\n              <span class=\"d-inline-block col-8 align-top\">{{ item.mealObject.strMeal }}</span>\r\n              <span class=\"float-end align-top\">{{ `NT$${item.subtotal}` }}</span>\r\n              <br>\r\n              <span v-if=\"item.setMenuObject.setMenuPrice\" class=\"text-body-secondary ps-3\">\r\n                {{ item.setMenuObject.setMenuName }}\r\n              </span>\r\n            </summary>\r\n\r\n            <!-- 小摺疊面板收合的內容 -->\r\n            <table class=\"table table-sm mt-2 table-bordered\">\r\n              <tbody>\r\n\r\n                <!-- 餐點數量及基本單價 -->\r\n                <tr>\r\n                  <td>數量 / 基本單價</td>\r\n                  <td>{{ `×${item.count}` }}</td>\r\n                  <td>{{ `$${item.mealObject.price}` }}</td>\r\n                </tr>\r\n\r\n                <!-- 辣度 -->\r\n                <tr>\r\n                  <td>{{ item.spicyObject.name }}</td>\r\n                  <td colspan=\"2\">$0</td>\r\n                </tr>\r\n\r\n                <!-- 加量 -->\r\n                <tr v-if=\"item.extraObject.value\">\r\n                  <td>{{ item.extraObject.name }}</td>\r\n                  <td colspan=\"2\">{{ `$${item.extraObject.price}` }}</td>\r\n                </tr>\r\n\r\n                <!-- 套餐 -->\r\n                <tr>\r\n                  <td>\r\n                    {{ item.setMenuObject.setMenuName }}<br>\r\n                    <span class=\"text-body-secondary\">\r\n                      {{ item.setMenuObject.setMenuDescription }}\r\n                    </span>\r\n                  </td>\r\n                  <td colspan=\"2\">{{ `$${item.setMenuObject.setMenuPrice}` }}</td>\r\n                </tr>\r\n\r\n                <!-- 備註 -->\r\n                <tr v-if=\"item.notes\">\r\n                  <td colspan=\"3\">\r\n                    <details>\r\n                      <summary>備註</summary>\r\n                      <p class=\"my-0 text-body-secondary text-break\">{{ item.notes }}</p>\r\n                    </details>\r\n                  </td>\r\n                </tr>\r\n\r\n              </tbody>\r\n            </table>\r\n          </details>\r\n\r\n          <!-- 訂單小計 -->\r\n          <div class=\"custom-div-cart-subtotal\">\r\n            <p class=\"my-2\">訂單小計：</p>\r\n            <p class=\"my-2\">{{ `NT$${order.cartSubtotal}` }}</p>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  inject: ['orderHistory']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* icon解決方案：https://stackoverflow.com/questions/66231936/change-accordion-button-collapsed-icon-color-in-bootstrap-5 */\r\n.accordion-button {\r\n  background-color: var(--bs-wine-red);\r\n  --bs-accordion-btn-color: #fff;\r\n  --bs-accordion-active-color: #fff;\r\n  --bs-accordion-btn-icon: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e\");\r\n  --bs-accordion-btn-active-icon: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e\");\r\n\r\n  &::after {\r\n    margin-left: 1rem;\r\n  }\r\n}\r\n\r\n.accordion-body > details > table {\r\n  margin-left: 0.75rem;\r\n  width: calc(100% - 0.75rem);\r\n}\r\n\r\ntr > td:not(:first-child), tr > th:not(:first-child) {\r\n  text-align: right;\r\n}\r\n\r\n.custom-div-cart-subtotal {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: var(--bs-gray-200);\r\n  padding: 0 0.75rem;\r\n  border-radius: 0.25rem;\r\n  margin: 0 -0.75rem;\r\n}\r\n</style>\r\n","import { render } from \"./OrderAccordion.vue?vue&type=template&id=a9bc4816&scoped=true\"\nimport script from \"./OrderAccordion.vue?vue&type=script&lang=js\"\nexport * from \"./OrderAccordion.vue?vue&type=script&lang=js\"\n\nimport \"./OrderAccordion.vue?vue&type=style&index=0&id=a9bc4816&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a9bc4816\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container px-4 py-3\">\r\n\r\n    <!-- 還沒加入訂單的時候，的提示訊息 -->\r\n    <div v-if=\"!orderHistory.length\">\r\n      <h1 class=\"text-center text-body-tertiary mt-4\">尚未加入訂單</h1>\r\n      <p class=\"text-center\">\r\n        <RouterLink to=\"/\" title=\"首頁\" class=\"text-body-tertiary\">\r\n          回菜單\r\n        </RouterLink>\r\n        /\r\n        <RouterLink to=\"/cart\" title=\"購物車頁面\" class=\"text-body-tertiary\">\r\n          前往購物車\r\n        </RouterLink>\r\n      </p>\r\n    </div>\r\n\r\n    <!-- 大標題以及結帳按鈕 -->\r\n    <div v-if=\"orderHistory.length\" class=\"row mb-3\">\r\n      <h1 class=\"col\">點餐紀錄</h1>\r\n      <div v-if=\"!(paymentStatus === 'payOnSite' || paymentStatus === 'succeed')\" class=\"col-auto\">\r\n        <button type=\"button\" class=\"btn btn-outline-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#paySelectModal\">\r\n          結帳去\r\n        </button>\r\n      </div>\r\n      <div v-if=\"paymentStatus === 'payOnSite'\" class=\"col-auto\">\r\n        <button type=\"button\" class=\"btn btn-outline-success\" disabled>\r\n          現場結帳\r\n        </button>\r\n      </div>\r\n      <div v-if=\"paymentStatus === 'succeed'\" class=\"col-auto\">\r\n        <button type=\"button\" class=\"btn btn-outline-success\" disabled>\r\n          已結帳\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"orderHistory.length\">\r\n      <h5 class=\"float-end lh-sm\">總金額 {{ `NT$ ${totalAmount} 元` }}</h5>\r\n      <!-- 以首次提交購物車的時間點判斷當下日期 -->\r\n      <p class=\"mb-0\">{{ currentDate }}</p>\r\n      <p class=\"mb-0\">桌號：{{ tableNumber }}</p>\r\n      <p>\r\n        用餐人數：{{ guestsCount }}位\r\n        <RouterLink to=\"/\" class=\"text-roast-brown float-end text-decoration-none\">\r\n          回菜單〉\r\n        </RouterLink>\r\n      </p>\r\n    </div>\r\n\r\n    <PaySelectModal ref=\"paySelectModal\" @processPayment=\"processPayment\"></PaySelectModal>\r\n    <PayLoadingModal ref=\"payLoadingModal\"></PayLoadingModal>\r\n\r\n    <!-- 將每次點餐的紀錄放在手風琴的面板 -->\r\n    <OrderAccordion v-show=\"orderHistory.length\"></OrderAccordion>\r\n\r\n    <ToTopBtn></ToTopBtn>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, inject, ref } from 'vue'\r\nimport { onBeforeRouteLeave } from 'vue-router'\r\nimport PaySelectModal from '@/components/order-history-page/PaySelectModal.vue'\r\nimport PayLoadingModal from '@/components/order-history-page/PayLoadingModal.vue'\r\nimport OrderAccordion from '@/components/order-history-page/OrderAccordion.vue'\r\nimport ToTopBtn from '@/components/application/ToTopBtn.vue'\r\n\r\nconst guestsCount = inject('guestsCount')\r\nconst tableNumber = inject('tableNumber')\r\n\r\nconst orderHistory = inject('orderHistory')\r\nconst paymentStatus = inject('paymentStatus')\r\n\r\nconst currentDate = computed(() => {\r\n  return new Date(orderHistory.value[0].dateTime).toLocaleDateString()\r\n})\r\n\r\n// 總金額\r\nconst totalAmount = computed(() => {\r\n  let result = 0\r\n  orderHistory.value.forEach(order => {\r\n    result += order.cartSubtotal\r\n  })\r\n  return result\r\n})\r\n\r\n// 付款處理\r\nfunction processPayment (selected) {\r\n  if (selected === 'payOnSite') {\r\n    // 如果現場付款，就不做額外處理\r\n    paymentStatus.value = selected\r\n  } else if (selected === 'payWithCreditCard' || selected === 'payDigital') {\r\n    paymentStatus.value = 'processing'\r\n    payLoadingModal.value.modalInstance.show()\r\n\r\n    // 隨機模擬付款結果，70%機率成功，五秒後顯示結果\r\n    setTimeout(() => {\r\n      const number = Math.random()\r\n      const result = number < 0.7 ? 'succeed' : 'failed'\r\n      paymentStatus.value = result\r\n    }, 5000)\r\n  } else {\r\n    // 如果真的有奇怪的值的時候，但應該不會發生\r\n    console.warn('沒有選擇有效付款選項。')\r\n  }\r\n}\r\n\r\n// 確保Modal能夠被關閉\r\nconst paySelectModal = ref(null)\r\nconst payLoadingModal = ref(null)\r\nonBeforeRouteLeave(() => {\r\n  if (document.getElementById('paySelectModal').classList.contains('show') ||\r\n    document.getElementById('payLoadingModal').classList.contains('show')) {\r\n    paySelectModal.value.modalInstance.hide()\r\n    if (paymentStatus.value !== 'processing') {\r\n      payLoadingModal.value.modalInstance.hide()\r\n    }\r\n\r\n    return false\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  @media screen and (min-width: 1200px) {\r\n    max-width: 960px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./OrderHistoryPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrderHistoryPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrderHistoryPage.vue?vue&type=style&index=0&id=174579fb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-174579fb\"]])\n\nexport default __exports__"],"names":["emit","__emit","paymentMethods","name","value","imgURL","counter","credit","creditCard","paymentSelected","ref","modal","modalInstance","confirmOption","hide","onMounted","Modal","addEventListener","onBeforeUnmount","__expose","__exports__","paymentStatus","inject","resetStatus","allowToClose","backdrop","keyboard","id","class","key","colspan","_createElementBlock","_hoisted_1","_Fragment","_renderList","$options","orderHistory","order","index","dateTime","_createElementVNode","_hoisted_2","type","_toDisplayString","_hoisted_4","Date","toLocaleTimeString","_hoisted_3","_hoisted_6","cart","item","_hoisted_7","_hoisted_8","mealObject","strMeal","_hoisted_9","subtotal","setMenuObject","setMenuPrice","_hoisted_10","setMenuName","_createCommentVNode","_hoisted_11","count","price","spicyObject","extraObject","_hoisted_12","_hoisted_13","_createTextVNode","_hoisted_14","setMenuDescription","_hoisted_15","notes","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","cartSubtotal","_hoisted_5","render","guestsCount","tableNumber","currentDate","computed","toLocaleDateString","totalAmount","result","forEach","processPayment","selected","payLoadingModal","show","setTimeout","number","Math","random","console","warn","paySelectModal","onBeforeRouteLeave","document","getElementById","classList","contains"],"sourceRoot":""}